/* 1. 引入 Inter 字體 (全站核心字體) */
@import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100..900;1,100..900&display=swap');

/* 2. 全域變數管理 */
:root {
    --font-main: 'Inter', -apple-system, sans-serif;
    --primary-blue: #5489ba;
    --stardew-brown: #c3d5d6;
    --border-light: #eeeeee;
    --bg-keg: #e9eaf0;
    --text-keg: #060061;
}

/* 3. 基礎重設與容器 */
* { 
    font-family: var(--font-main); 
    box-sizing: border-box;
}

body {
    background-color: #ffffff;
    padding: 20px;
    margin: 0;
    width: 100%;
    -webkit-font-smoothing: antialiased;
}

.main-content-wrapper {
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    overflow: hidden; /* 防止內容撐破外殼 */
}

/* 4. Header 與 導覽列 */
.site-header { text-align: center; margin-bottom: 30px; }
.header-img { width: 100%; max-width: 600px; height: auto; display: block; margin: 0 auto; }

/* 導覽列樣式 */

.main-nav {
    display: flex;
    justify-content: center;
    gap: 30px;
    padding: 20px 0;
    background-color: #f8f9fa;
    margin-bottom: 20px;
}

.nav-item {
    text-decoration: none;
    color: #666;
    font-size: 16px;
    font-weight: 400;
    padding: 5px 10px;
}

.nav-item.active {
    color: var(--primary-blue);
    border-bottom: 4px solid var(--primary-blue);
    font-weight: 600;
}

/* 5. 搜尋與控制區 */
.header-controls {
    display: flex;
    justify-content: flex-end;
    width: 100%;
    margin-bottom: 20px;
}

.search-box {
    padding: 8px 15px;
    border: 1px solid var(--border-light);
    border-radius: 20px;
    font-size: 13px;
    width: 100%;
    max-width: 250px;
    outline: none;
}

/* Artisan Switch */
.artisan-container { display: flex; align-items: center; gap: 10px; font-weight: 400; }
.switch { position: relative; display: inline-block; width: 46px; height: 22px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: #4caf50; }
input:checked + .slider:before { transform: translateX(24px); }

/* 6. 表格系統 (通用) */
.table-container { width: 100%; background-color: #fff; }

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    border: 1px solid var(--border-light);
    padding: 10px 6px;
    text-align: center;
    font-size: clamp(10px, 1.1vw, 13px);
    vertical-align: middle;
}

th { font-weight: 600; background-color: #f5f5f5; }

/* 7. [農作物頁面] 特有配色 */
.group-keg, .col-keg { background-color: #bdbec9; color: #05022e; }
.cell-keg, .smoked-cell { background-color: var(--bg-keg); color: var(--text-keg); font-weight: bold !important; }
.group-jar, .cell-jar { background-color: #bec9bd; color: #00260a; }
.group-dehydrator, .cell-dehyd { background-color: #c9bdbd; color: #2e0000; }

/* ========= NPC頁面佈局 =========== */

/* 彈出視窗內部佈局 */
.modal-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
    border-bottom: 1px solid #eee;
    padding-bottom: 15px;
}

.modal-portrait {
    width: 80px;
    height: 80px;
    image-rendering: pixelated;
    background: #f9f9f9;
    border-radius: 8px;
    padding: 5px;
}

.modal-title {
    margin: 0;
    font-size: 24px;
}

.modal-birthday {
    color: #d97706; /* 暖橙色標註生日 */
    margin: 5px 0 0 0;
}

.section-label {
    font-size: 16px;
    margin: 20px 0 10px 0;
    color: #333;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* 禮物與行程清單樣式 */
.loved-list, .schedule-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.loved-list li {
    display: inline-block;
    background: #f0f7ff;
    color: #0000ff;
    padding: 4px 10px;
    border-radius: 20px;
    margin: 4px;
    font-size: 13px;
    border: 1px solid #cce0ff;
}

.schedule-list li {
    padding: 8px 0;
    border-bottom: 1px dashed #eee;
    font-size: 14px;
    color: #444;
}

.schedule-list li:last-child {
    border-bottom: none;
}

/* --- 新增月曆區域樣式 --- */

/* 2x2 的月曆大容器 */
.calendar-section-container {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 左右兩欄 */
    gap: 25px;
    padding: 20px;
    max-width: 1000px;
    margin: 0 auto 30px auto; /* 下方留點距離 */
    border-bottom: 2px dashed #eee; /* 分隔線 */
}

/* 單個季節月曆的外觀 */
.calendar-block {
    background-color: #d7e8ec; /* 格子背景色 */
    border: 2px solid #e1e2e3; /* 邊框 */
    border-radius: 8px;
    padding: 10px;
    box-shadow: 4px 4px 0px rgba(0,0,0,0.1); /* 復古感的陰影 */
}

.calendar-title {
    text-align: center;
    margin: 5px 0 10px 0;
    color: #5c3c1e;
    font-size: 20px;
    font-weight: bold;
}

/* 28 天的格子 */
.calendar-days-grid {
    display: grid;
    grid-template-columns: repeat(7, minmax(0, 1fr)); /* 一週 7 天 */
    table-layout: fixed; 
    gap: 0;
    background-color: #c2cacc; /* 格子背景顏色 */
    border: 1px solid #e0e0e0;
    /* 修正：使用 minmax(0, 1fr) 確保格子不會被內容撐開 */
    width: 100%;            /* 確保寬度填滿 */
    box-sizing: border-box; /* 確保邊框不會額外增加寬度 */
    overflow: hidden;       /* 萬一有微小溢出，直接裁切 */
}

/* 單一日期格子 */
.calendar-day {
    background-color: #c5d1d4; /* 格子內部顏色較亮 */
    aspect-ratio: 1 / 1; /* 保持正方形 */
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* 從頂部開始排列 */
    padding: 2px;
    font-size: 13px;
    border: 1px solid #d7e8ec;
    color: #3a5557;
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
}

/* 月曆中的頭像 */
.calendar-portrait {
    width: 70%;
    max-width: 30px;
    height: auto;
    object-fit: contain;
    display: block;
    image-rendering: pixelated;
    cursor: pointer; /* 讓游標變手指 */
    transition: transform 0.1s;
}

.day-number {
    position: absolute;
    top: 4px;
    left: 4px;
    font-size: 11px;
    line-height:1 ;
    align-self: flex-start; /* 日期數字靠左上角 */
    margin-bottom: 2px;
    color: #020e54;
    opacity: 0.7;
    z-index: 10;
}

/* 月曆內的名字樣式 */
.calendar-npc-name {
    font-weight: 600; /* 依據要求使用粗體 */
    /* 使用 clamp 確保在小螢幕不會破版，在大螢幕易於閱讀 */
    font-size: clamp(8px, 0.6vw, 11px); 
    color: #333;
    line-height: 1;
    width: 100%;           /* 限制名字寬度 */
    margin-top: 2px;
    display: flex;
    flex-direction: column;
    align-items: center;
    white-space: nowrap;   /* 防止名字換行撐開格子 */
    text-overflow: ellipsis; /* 名字太長顯示 ... */
    overflow: hidden;
}

.calendar-npc-item {
    display: flex;
    flex-direction: column;  /* 讓圖片與文字上下排列 */
    align-items: center;     /* 水平居中圖片與文字 */
    justify-content: center; /* 垂直居中圖片與文字 */
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.calendar-portrait:hover {
    transform: scale(1.1); /* 滑鼠移上去稍微放大 */
    width: 80%; /* 稍微調大一點，垂直空間變多了 */
    max-width: 28px;
    height: auto;
    image-rendering: pixelated;
}

/* NPC 網格佈局 */
.npc-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
    padding: 10px;
    max-width: 1000px;
    margin: 0 auto;
}

/* 2. 居民名字粗體 */
.npc-name {
    margin-top: 10px;
    font-size: 14px;
    color: #333;
    /* 加入粗體設定 */
    font-weight: 600;
}

.npc-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    min-width: 0;
    border-radius: 5px;
    padding: 5px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s;
}

.npc-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.npc-portrait {
    width: 100%;
    max-width: 48px;
    height: auto;
    image-rendering: pixelated;
    margin-bottom: 10px;
}

/* 彈窗樣式 */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0; top: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 30px;
    width: 80%;
    max-width: 500px;
    border-radius: 12px;
}

/* 針對手機版 (螢幕寬度 600px 以下) 的微調 */
@media (max-width: 600px) {

    body {
        padding: 10px; /* 縮小邊距 */
        display: flex;
        flex-direction: column;
        align-items: center; 
    }
    
    /* 1. 調整格子基礎佈局：讓內容完全置中 */
    .calendar-day {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0; /* 清除間距，確保 80% 比例準確 */
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        position: absolute;
    }

    /* --- 情境 A：有生日的日子 --- */
    /* 當 .calendar-day 裡面含有 NPC 項目時 */
    .calendar-day:has(.calendar-npc-item) .day-number {
        display: none; /* 隱藏日期數字 */
    }

    .calendar-day:has(.calendar-npc-item) .calendar-npc-name {
        display: none; /* 隱藏名字 */
    }

    .calendar-day .calendar-npc-item {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .calendar-day .calendar-portrait {
        width: 80% !important; /* 佔據格子 80% */
        max-width: none;      /* 取消桌面版的固定像素限制 */
        height: auto;
        display: block;
    }

    /* --- 情境 B：沒有生日的日子 --- */
    /* 當 .calendar-day 裡面沒有 NPC 項目時 */
    .calendar-day:not(:has(.calendar-npc-item)) .day-number {
        position: static;     /* 取消原本的絕對定位 (左上角) */
        font-size: 13px;      /* 放大數字 */
        font-weight: bold;
        text-align: center;
        color: #3a5557;
        opacity: 0.7;
        margin: 0;
    }
    
    /* 在這裡修改 NPC 名字的字體大小 */
    .npc-name {
        font-size: 9px;
        text-align: center;
        margin-top: 5px;
    }

    /* NPC 卡片上的生日文字 */
    .npc-bday-badge {
        font-size: 7px;      /* 生日通常比名字小，設定為 10px 較為精緻 */
        margin-top: 3px;      /* 讓生日跟名字靠得近一點 */
        display: block;       /* 確保它會換行顯示在名字下方 */
    }

    .npc-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* 自動填滿 */
        gap: 5px;
        padding: 10px;
    }

/*///==========/* 9. [釣魚助手] 8 欄位擠進 1000px 專用設定 ////*==========/*/
.fishing-table {
    table-layout: auto; /* 只有釣魚表格強制固定寬度 */
}

.fishing-table th, .fishing-table td {
    white-space: normal !important; /* 允許換行 */
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.info-tag {
    display: inline-block;
    font-size: 10px;
    padding: 1px 6px;
    border-radius: 4px;
    margin: 1px;
    background-color: #f5f5f5;
    border: 1px solid var(--border-light);
    white-space: normal;
}

.tag-rain { background-color: #d1ecf1; color: #0c5460; }
.tag-sun { background-color: #fff3cd; color: #856404; }
.tag-hard { color: #d9534f; font-weight: bold; }
.price-iridium { color: #8a2be2; font-weight: bold; }

/* 10. 季節分頁標籤 */
.season-tabs { display: flex; gap: 5px; margin-bottom: 15px; border-bottom: 1px solid #eee; overflow-x: auto; }
.tab-btn { padding: 8px 15px; border: none; background: #f5f5f5; cursor: pointer; border-radius: 6px 6px 0 0; white-space: nowrap; }
.tab-btn.active { background: var(--primary-blue); color: white; }

/* 11. 手機版響應式微調 */
@media (max-width: 600px) {
    .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch;}
    table { min-width: 800px; } /* 在手機上保持基本寬度供捲動 */
    .header-controls { flex-direction: column; align-items: flex-end; gap: 12px; }
    .npc-grid { grid-template-columns: repeat(3, 1fr); }
}
